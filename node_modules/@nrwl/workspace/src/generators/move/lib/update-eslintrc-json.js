"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.updateEslintrcJson = void 0;
const path_1 = require("path");
const devkit_1 = require("@nrwl/devkit");
const utils_1 = require("./utils");
/**
 * Update the .eslintrc file of the project if it exists.
 *
 * @param schema The options provided to the schematic
 */
function updateEslintrcJson(tree, schema, project) {
    const destination = utils_1.getDestination(tree, schema, project);
    const eslintRcPath = path_1.join(destination, '.eslintrc.json');
    if (!tree.exists(eslintRcPath)) {
        // no .eslintrc found. nothing to do
        return;
    }
    const offset = devkit_1.offsetFromRoot(destination);
    devkit_1.updateJson(tree, eslintRcPath, (eslintRcJson) => {
        var _a;
        eslintRcJson.extends = `${offset}.eslintrc.json`;
        (_a = eslintRcJson.overrides) === null || _a === void 0 ? void 0 : _a.forEach((override) => {
            var _a;
            if ((_a = override.parserOptions) === null || _a === void 0 ? void 0 : _a.project) {
                override.parserOptions.project = [`${destination}/tsconfig.*?.json`];
            }
        });
        return eslintRcJson;
    });
}
exports.updateEslintrcJson = updateEslintrcJson;
//# sourceMappingURL=update-eslintrc-json.js.map