"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.updatePackageJson = void 0;
const devkit_1 = require("@nrwl/devkit");
const path = require("path");
const utils_1 = require("./utils");
/**
 * Updates the name in the package.json if it exists.
 *
 * @param schema The options provided to the schematic
 */
function updatePackageJson(tree, schema, project) {
    const destination = utils_1.getDestination(tree, schema, project);
    const packageJsonPath = path.join(destination, 'package.json');
    if (!tree.exists(packageJsonPath)) {
        // nothing to do
        return;
    }
    const { npmScope } = devkit_1.getWorkspaceLayout(tree);
    const packageJson = JSON.parse(tree.read(packageJsonPath).toString('utf-8'));
    packageJson.name = utils_1.normalizeSlashes(`@${npmScope}/${schema.destination}`);
    tree.write(packageJsonPath, JSON.stringify(packageJson));
}
exports.updatePackageJson = updatePackageJson;
//# sourceMappingURL=update-package-json.js.map